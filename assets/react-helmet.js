import e from"prop-types";import t from"react-side-effect";import r from"react-fast-compare";import n from"react";import o from"object-assign";var a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var i={};Object.defineProperty(i,"__esModule",{value:true});function _interopDefault(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var u=_interopDefault(e);var s=_interopDefault(t);var c=_interopDefault(r);var l=_interopDefault(n);var p=_interopDefault(o);var f={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var T={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};var d=Object.keys(T).map((function(e){return T[e]}));var v={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"};var m={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};var y={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"};var h=Object.keys(m).reduce((function(e,t){e[m[t]]=t;return e}),{});var b=[T.NOSCRIPT,T.SCRIPT,T.STYLE];var g="data-react-helmet";var E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var A=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(e,t,r){t&&defineProperties(e.prototype,t);r&&defineProperties(e,r);return e}}();var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var inherits=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)};var objectWithoutProperties=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r};var possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t};var S=function encodeSpecialCharacters(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return false===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")};var O=function getTitleFromPropsList(e){var t=R(e,T.TITLE);var r=R(e,y.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,(function(){return Array.isArray(t)?t.join(""):t}));var n=R(e,y.DEFAULT_TITLE);return t||n||void 0};var w=function getOnChangeClientState(e){return R(e,y.ON_CHANGE_CLIENT_STATE)||function(){}};var P=function getAttributesFromPropsList(e,t){return t.filter((function(t){return"undefined"!==typeof t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return C({},e,t)}),{})};var L=function getBaseTagFromPropsList(e,t){return t.filter((function(e){return"undefined"!==typeof e[T.BASE]})).map((function(e){return e[T.BASE]})).reverse().reduce((function(t,r){if(!t.length){var n=Object.keys(r);for(var o=0;o<n.length;o++){var a=n[o];var i=a.toLowerCase();if(-1!==e.indexOf(i)&&r[i])return t.concat(r)}}return t}),[])};var I=function getTagsFromPropsList(e,t,r){var n={};return r.filter((function(t){if(Array.isArray(t[e]))return true;"undefined"!==typeof t[e]&&k("Helmet: "+e+' should be of type "Array". Instead found type "'+E(t[e])+'"');return false})).map((function(t){return t[e]})).reverse().reduce((function(e,r){var o={};r.filter((function(e){var r=void 0;var a=Object.keys(e);for(var i=0;i<a.length;i++){var u=a[i];var s=u.toLowerCase();-1===t.indexOf(s)||r===v.REL&&"canonical"===e[r].toLowerCase()||s===v.REL&&"stylesheet"===e[s].toLowerCase()||(r=s);-1===t.indexOf(u)||u!==v.INNER_HTML&&u!==v.CSS_TEXT&&u!==v.ITEM_PROP||(r=u)}if(!r||!e[r])return false;var c=e[r].toLowerCase();n[r]||(n[r]={});o[r]||(o[r]={});if(!n[r][c]){o[r][c]=true;return true}return false})).reverse().forEach((function(t){return e.push(t)}));var a=Object.keys(o);for(var i=0;i<a.length;i++){var u=a[i];var s=p({},n[u],o[u]);n[u]=s}return e}),[]).reverse()};var R=function getInnermostProperty(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null};var H=function reducePropsToState(e){return{baseTag:L([v.HREF,v.TARGET],e),bodyAttributes:P(f.BODY,e),defer:R(e,y.DEFER),encode:R(e,y.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:P(f.HTML,e),linkTags:I(T.LINK,[v.REL,v.HREF],e),metaTags:I(T.META,[v.NAME,v.CHARSET,v.HTTPEQUIV,v.PROPERTY,v.ITEM_PROP],e),noscriptTags:I(T.NOSCRIPT,[v.INNER_HTML],e),onChangeClientState:w(e),scriptTags:I(T.SCRIPT,[v.SRC,v.INNER_HTML],e),styleTags:I(T.STYLE,[v.CSS_TEXT],e),title:O(e),titleAttributes:P(f.TITLE,e)}};var _=function(){var e=Date.now();return function(t){var r=Date.now();if(r-e>16){e=r;t(r)}else setTimeout((function(){_(t)}),0)}}();var N=function cafPolyfill(e){return clearTimeout(e)};var j="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||_:a.requestAnimationFrame||_;var M="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||N:a.cancelAnimationFrame||N;var k=function warn(e){return console&&"function"===typeof console.warn&&console.warn(e)};var D=null;var x=function handleClientStateChange(e){D&&M(D);if(e.defer)D=j((function(){F(e,(function(){D=null}))}));else{F(e);D=null}};var F=function commitTagChanges(e,t){var r=e.baseTag,n=e.bodyAttributes,o=e.htmlAttributes,a=e.linkTags,i=e.metaTags,u=e.noscriptTags,s=e.onChangeClientState,c=e.scriptTags,l=e.styleTags,p=e.title,f=e.titleAttributes;W(T.BODY,n);W(T.HTML,o);B(p,f);var d={baseTag:q(T.BASE,r),linkTags:q(T.LINK,a),metaTags:q(T.META,i),noscriptTags:q(T.NOSCRIPT,u),scriptTags:q(T.SCRIPT,c),styleTags:q(T.STYLE,l)};var v={};var m={};Object.keys(d).forEach((function(e){var t=d[e],r=t.newTags,n=t.oldTags;r.length&&(v[e]=r);n.length&&(m[e]=d[e].oldTags)}));t&&t();s(e,v,m)};var Y=function flattenArray(e){return Array.isArray(e)?e.join(""):e};var B=function updateTitle(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=Y(e));W(T.TITLE,t)};var W=function updateAttributes(e,t){var r=document.getElementsByTagName(e)[0];if(r){var n=r.getAttribute(g);var o=n?n.split(","):[];var a=[].concat(o);var i=Object.keys(t);for(var u=0;u<i.length;u++){var s=i[u];var c=t[s]||"";r.getAttribute(s)!==c&&r.setAttribute(s,c);-1===o.indexOf(s)&&o.push(s);var l=a.indexOf(s);-1!==l&&a.splice(l,1)}for(var p=a.length-1;p>=0;p--)r.removeAttribute(a[p]);o.length===a.length?r.removeAttribute(g):r.getAttribute(g)!==i.join(",")&&r.setAttribute(g,i.join(","))}};var q=function updateTags(e,t){var r=document.head||document.querySelector(T.HEAD);var n=r.querySelectorAll(e+"["+g+"]");var o=Array.prototype.slice.call(n);var a=[];var i=void 0;t&&t.length&&t.forEach((function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===v.INNER_HTML)r.innerHTML=t.innerHTML;else if(n===v.CSS_TEXT)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var u="undefined"===typeof t[n]?"":t[n];r.setAttribute(n,u)}r.setAttribute(g,"true");o.some((function(e,t){i=t;return r.isEqualNode(e)}))?o.splice(i,1):a.push(r)}));o.forEach((function(e){return e.parentNode.removeChild(e)}));a.forEach((function(e){return r.appendChild(e)}));return{oldTags:o,newTags:a}};var U=function generateElementAttributesAsString(e){return Object.keys(e).reduce((function(t,r){var n="undefined"!==typeof e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n}),"")};var K=function generateTitleAsString(e,t,r,n){var o=U(r);var a=Y(t);return o?"<"+e+" "+g+'="true" '+o+">"+S(a,n)+"</"+e+">":"<"+e+" "+g+'="true">'+S(a,n)+"</"+e+">"};var X=function generateTagsAsString(e,t,r){return t.reduce((function(t,n){var o=Object.keys(n).filter((function(e){return!(e===v.INNER_HTML||e===v.CSS_TEXT)})).reduce((function(e,t){var o="undefined"===typeof n[t]?t:t+'="'+S(n[t],r)+'"';return e?e+" "+o:o}),"");var a=n.innerHTML||n.cssText||"";var i=-1===b.indexOf(e);return t+"<"+e+" "+g+'="true" '+o+(i?"/>":">"+a+"</"+e+">")}),"")};var G=function convertElementAttributestoReactProps(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){t[m[r]||r]=e[r];return t}),t)};var z=function convertReactPropstoHtmlAttributes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){t[h[r]||r]=e[r];return t}),t)};var Q=function generateTitleAsReactComponent(e,t,r){var n;var o=(n={key:t},n[g]=true,n);var a=G(r,o);return[l.createElement(T.TITLE,a,t)]};var V=function generateTagsAsReactComponent(e,t){return t.map((function(t,r){var n;var o=(n={key:r},n[g]=true,n);Object.keys(t).forEach((function(e){var r=m[e]||e;if(r===v.INNER_HTML||r===v.CSS_TEXT){var n=t.innerHTML||t.cssText;o.dangerouslySetInnerHTML={__html:n}}else o[r]=t[e]}));return l.createElement(e,o)}))};var $=function getMethodsForTag(e,t,r){switch(e){case T.TITLE:return{toComponent:function toComponent(){return Q(e,t.title,t.titleAttributes,r)},toString:function toString(){return K(e,t.title,t.titleAttributes,r)}};case f.BODY:case f.HTML:return{toComponent:function toComponent(){return G(t)},toString:function toString(){return U(t)}};default:return{toComponent:function toComponent(){return V(e,t)},toString:function toString(){return X(e,t,r)}}}};var J=function mapStateOnServer(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,o=e.htmlAttributes,a=e.linkTags,i=e.metaTags,u=e.noscriptTags,s=e.scriptTags,c=e.styleTags,l=e.title,p=void 0===l?"":l,d=e.titleAttributes;return{base:$(T.BASE,t,n),bodyAttributes:$(f.BODY,r,n),htmlAttributes:$(f.HTML,o,n),link:$(T.LINK,a,n),meta:$(T.META,i,n),noscript:$(T.NOSCRIPT,u,n),script:$(T.SCRIPT,s,n),style:$(T.STYLE,c,n),title:$(T.TITLE,{title:p,titleAttributes:d},n)}};var Z=function Helmet(e){var t,r;return r=t=function(t){inherits(HelmetWrapper,t);function HelmetWrapper(){classCallCheck(this,HelmetWrapper);return possibleConstructorReturn(this,t.apply(this,arguments))}HelmetWrapper.prototype.shouldComponentUpdate=function shouldComponentUpdate(e){return!c(this.props,e)};HelmetWrapper.prototype.mapNestedChildrenToProps=function mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case T.SCRIPT:case T.NOSCRIPT:return{innerHTML:t};case T.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")};HelmetWrapper.prototype.flattenArrayTypeChildren=function flattenArrayTypeChildren(e){var t;var r=e.child,n=e.arrayTypeChildren,o=e.newChildProps,a=e.nestedChildren;return C({},n,(t={},t[r.type]=[].concat(n[r.type]||[],[C({},o,this.mapNestedChildrenToProps(r,a))]),t))};HelmetWrapper.prototype.mapObjectTypeChildren=function mapObjectTypeChildren(e){var t,r;var n=e.child,o=e.newProps,a=e.newChildProps,i=e.nestedChildren;switch(n.type){case T.TITLE:return C({},o,(t={},t[n.type]=i,t.titleAttributes=C({},a),t));case T.BODY:return C({},o,{bodyAttributes:C({},a)});case T.HTML:return C({},o,{htmlAttributes:C({},a)})}return C({},o,(r={},r[n.type]=C({},a),r))};HelmetWrapper.prototype.mapArrayTypeChildrenToProps=function mapArrayTypeChildrenToProps(e,t){var r=C({},t);Object.keys(e).forEach((function(t){var n;r=C({},r,(n={},n[t]=e[t],n))}));return r};HelmetWrapper.prototype.warnOnInvalidChildren=function warnOnInvalidChildren(e,t){if(!d.some((function(t){return e.type===t})))return"function"===typeof e.type?k("You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information."):k("Only elements types "+d.join(", ")+" are allowed. Helmet does not support rendering <"+e.type+"> elements. Refer to our API for more information.");if(t&&"string"!==typeof t&&(!Array.isArray(t)||t.some((function(e){return"string"!==typeof e}))))throw new Error("Helmet expects a string as a child of <"+e.type+">. Did you forget to wrap your children in braces? ( <"+e.type+">{``}</"+e.type+"> ) Refer to our API for more information.");return true};HelmetWrapper.prototype.mapChildrenToProps=function mapChildrenToProps(e,t){var r=this;var n={};l.Children.forEach(e,(function(e){if(e&&e.props){var o=e.props,a=o.children,i=objectWithoutProperties(o,["children"]);var u=z(i);r.warnOnInvalidChildren(e,a);switch(e.type){case T.LINK:case T.META:case T.NOSCRIPT:case T.SCRIPT:case T.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:u,nestedChildren:a});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:u,nestedChildren:a});break}}}));t=this.mapArrayTypeChildrenToProps(n,t);return t};HelmetWrapper.prototype.render=function render(){var t=this.props,r=t.children,n=objectWithoutProperties(t,["children"]);var o=C({},n);r&&(o=this.mapChildrenToProps(r,o));return l.createElement(e,o)};A(HelmetWrapper,null,[{key:"canUseDOM",set:function set$$1(t){e.canUseDOM=t}}]);return HelmetWrapper}(l.Component),t.propTypes={base:u.object,bodyAttributes:u.object,children:u.oneOfType([u.arrayOf(u.node),u.node]),defaultTitle:u.string,defer:u.bool,encodeSpecialCharacters:u.bool,htmlAttributes:u.object,link:u.arrayOf(u.object),meta:u.arrayOf(u.object),noscript:u.arrayOf(u.object),onChangeClientState:u.func,script:u.arrayOf(u.object),style:u.arrayOf(u.object),title:u.string,titleAttributes:u.object,titleTemplate:u.string},t.defaultProps={defer:true,encodeSpecialCharacters:true},t.peek=e.peek,t.rewind=function(){var t=e.rewind();t||(t=J({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:true,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}));return t},r};var ee=function NullComponent(){return null};var te=s(H,x,J)(ee);var re=Z(te);re.renderStatic=re.rewind;i.Helmet=re;i.default=re;const ne=i.__esModule;const oe=i.Helmet;export default i;export{oe as Helmet,ne as __esModule};

//# sourceMappingURL=dev.Helmet.js.map