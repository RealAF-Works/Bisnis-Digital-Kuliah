import e,{useRef as r,useState as t,useEffect as n}from"react";import o from"loadjs";var i="https://platform.twitter.com/widgets.js";var a="twttr";var u=a;var c=!!("undefined"!==typeof window&&window.document&&window.document.createElement);function loadTwitterLibrary(){o.isDefined(u)||o(i,u)}function twWidgetFactory(){return new Promise((function(e,r){var t=function rejectWithError(){return r(new Error("Could not load remote twitter widgets js"))};loadTwitterLibrary();o.ready(u,{success:function success(){var r=window[a];r&&r.widgets||t();e(r.widgets)},error:t})}))}function removeChildrenWithAttribute(e,r){e&&e.querySelectorAll("*").forEach((function(e){e.hasAttribute(r)&&e.remove()}))}function is(e,r){return e===r?0!==e||0!==r||1/e===1/r:e!==e&&r!==r}function isShallowEqual(e,r){if(is(e,r))return true;if("object"!==typeof e||null===e||"object"!==typeof r||null===r)return false;var t=Object.keys(e);var n=Object.keys(r);if(t.length!==n.length)return false;for(var o=0;o<t.length;o++)if(!Object.prototype.hasOwnProperty.call(r,t[o])||!is(e[t[o]],r[t[o]]))return false;return true}function useShallowCompareMemoize(e){var t=r();isShallowEqual(e,t.current)||(t.current=e);return t.current}function cloneShallow(e){return"object"===typeof e?Object.assign({},e):e}var l="twdiv";function useTwitterWidget(e,o,i,a){var u=t(null),f=u[0],s=u[1];var d=r(null);if(!c)return{ref:d,error:f};var w=[e,useShallowCompareMemoize(o),useShallowCompareMemoize(i)];n((function(){s(null);var r=false;if(d.current){removeChildrenWithAttribute(d.current,l);if(!d||!d.current)return;var t=document.createElement("div");t.setAttribute(l,"yes");d.current.appendChild(t);twWidgetFactory().then((function(r){return r[e](cloneShallow(o),t,cloneShallow(i))})).then((function(e){if(!e&&!r)throw new Error("Twitter could not create widget. If it is a Timeline or Tweet, ensure the screenName/tweetId exists.");d&&d.current&&(r?t&&t.remove():a&&a())})).catch((function(e){console.error(e);s(e)}))}return function(){r=true}}),w);return{ref:d,error:f}}var f=function Follow(r){var t=r.username,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createFollowButton",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};var s=function Hashtag(r){var t=r.hashtag,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createHashtagButton",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};var d=function Mention(r){var t=r.username,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createMentionButton",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};var w=function Share(r){var t=r.url,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createShareButton",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};var v=function Timeline(r){var t=r.dataSource,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createTimeline",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};var m=function Tweet(r){var t=r.tweetId,n=r.options,o=r.onLoad,i=r.renderError;var a=useTwitterWidget("createTweet",t,n,o),u=a.ref,c=a.error;return e.createElement("div",{ref:u},c&&i&&i(c))};export{f as Follow,s as Hashtag,d as Mention,w as Share,v as Timeline,m as Tweet,loadTwitterLibrary as eagerLoadTwitterLibrary};

//# sourceMappingURL=index.js.map