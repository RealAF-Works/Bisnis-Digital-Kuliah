import e from"dayjs";import t,{useRef as r,useEffect as n,useState as a}from"react";const DateTimePrimitive=({date:r,format:n})=>{const a=e.unix(new Date(r).getTime()/1e3);const l=e(a).format(n);return t.createElement(t.Fragment,null,l)};const DangerousHTML=({html:e})=>{const a=r(null);n((()=>{if(!e||!a.current)return;const t=document.createRange().createContextualFragment(e);a.current.append(t)}),[]);return t.createElement("div",{style:{display:"contents"},ref:a})};const DataProvider=e=>{const{fetchData:t,params:l,initialData:c,persistDataDuringLoading:s=false,renderLoading:o=(()=>null),renderSuccess:u,renderError:i=(()=>null)}=e;const[m,d]=a("idle");const[g,p]=a(c);const[f,y]=a(null);const E=r(e.initialData!==void 0);const D=r(s);D.current=s;n((()=>{if(E.current){E.current=false;return}const fetchDataAsync=async()=>{d("loading");D.current||p(void 0);try{const e=await t(l);p(e);d("success")}catch(e){y(e);d("error")}};fetchDataAsync()}),[l,t]);switch(m){case"idle":case"loading":return e.persistDataDuringLoading&&g?u(g,true):o();case"success":return u(g,false);case"error":return i(f);default:return null}};const Repeater=e=>{const{items:r,renderItem:n,renderEmpty:a}=e;if("data"in r&&"meta"in r){const{data:e,meta:l}=r;return Array.isArray(e)===false?null:e.length===0?a?a():null:t.createElement(t.Fragment,null,e.map(((e,t)=>n(typeof e==="object"?{...e,teleportMeta:l}:e,t))))}return Array.isArray(r)?r.length===0?a?a():null:t.createElement(t.Fragment,null,r.map(((e,t)=>n(e,t)))):null};const Asset=({src:e,description:r})=>t.createElement(t.Fragment,null,e&&t.createElement("img",{loading:"lazy",src:e,alt:r??""}));const CaisyDocumentLink=({node:e,children:r})=>e.attrs.src?t.createElement(Asset,{...e.attrs}):t.createElement(t.Fragment,null,r);const CMSMixedType=({itemData:e,mappingConfiguration:r,renderDefault:n,renderError:a})=>{try{return r?.[e.typeId]?t.createElement(t.Fragment,null,r[e.typeId]?.(e.attributes??e)??null):t.createElement(t.Fragment,null,n?n(e):"default case")}catch(e){return t.createElement(t.Fragment,null,a?a(e):"error case")}};export{CMSMixedType,CaisyDocumentLink,DangerousHTML,DataProvider,DateTimePrimitive,Repeater};
//# sourceMappingURL=react-components.js.map